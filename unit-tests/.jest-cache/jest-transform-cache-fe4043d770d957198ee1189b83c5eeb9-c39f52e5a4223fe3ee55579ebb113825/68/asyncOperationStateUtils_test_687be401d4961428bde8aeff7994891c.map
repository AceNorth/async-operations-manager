{"version":3,"sources":["asyncOperationStateUtils_test.js"],"names":["_chai","require","_sinon","_interopRequireDefault","_asyncOperationStateUtils","obj","__esModule","default","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","describe","stub","registeredAsyncOperationDescriptors","beforeEach","console","afterEach","restore","it","asyncOperationDescriptor","descriptorId","requiredParams","operationType","debug","alwaysImmutable","minCacheTime","maxCacheTime","newState","updateAsyncOperationDescriptor","expect","to","matchSnapshot","asyncOperationDescriptors","UPDATE_PERSON_DATA","deep","include","parentOperationDescriptorId","callCount","equal","state","newAsyncOperation","fetchStatus","message","lastFetchStatusTime","lastDataStatusTime","personId","updateAsyncOperation","have","all","keys","asyncOperationUpdates","asyncOperation","dataStatus","asyncOperationKey","teamId","bulkUpdateAsyncOperations","getAsyncOperation","FETCH_PERSON_DATA_111","be","an","_fetchPersonDataAsync","FETCH_ALL_PERSON_DATA","fetchPersonDataAsyncOperationDescriptor","_FETCH_ALL_PERSON_DAT2","_fetchPersonDataAsync2","FETCH_ALL_PERSON_DATA_FOR_ORG_22","orgId","FETCH_ALL_DATA_FOR_ORG_22","FETCH_ALL_PERSON_DATA_FOR_ORG","FETCH_ALL_DATA_FOR_ORG"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _chai = require(\"chai\");\n\nvar _sinon = _interopRequireDefault(require(\"sinon\"));\n\nvar _asyncOperationStateUtils = _interopRequireDefault(require(\"../asyncOperationStateUtils\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\ndescribe('asyncOperationStateUtils', function () {\n  describe('updateAsyncOperationDescriptor', function () {\n    var stub;\n    var registeredAsyncOperationDescriptors;\n    beforeEach(function () {\n      registeredAsyncOperationDescriptors = {};\n      stub = _sinon.default.stub(console, 'error');\n    });\n    afterEach(function () {\n      stub.restore();\n    });\n    it('should update state with an asyncOperationDescriptor', function () {\n      var asyncOperationDescriptor = {\n        descriptorId: 'UPDATE_PERSON_DATA',\n        requiredParams: ['personId'],\n        operationType: 'WRITE',\n        // optional values\n        debug: false,\n        alwaysImmutable: false,\n        minCacheTime: 5000,\n        maxCacheTime: 60000\n      };\n\n      var newState = _asyncOperationStateUtils.default.updateAsyncOperationDescriptor(registeredAsyncOperationDescriptors, asyncOperationDescriptor);\n\n      (0, _chai.expect)(newState).to.matchSnapshot('state with well formed asyncOperationDescriptor');\n    });\n    it('should update state with an asyncOperationDescriptor and default optional values', function () {\n      var asyncOperationDescriptor = {\n        descriptorId: 'UPDATE_PERSON_DATA',\n        requiredParams: ['personId'],\n        operationType: 'WRITE'\n      };\n\n      var asyncOperationDescriptors = _asyncOperationStateUtils.default.updateAsyncOperationDescriptor(registeredAsyncOperationDescriptors, asyncOperationDescriptor);\n\n      (0, _chai.expect)(asyncOperationDescriptors.UPDATE_PERSON_DATA).to.deep.include({\n        parentOperationDescriptorId: null,\n        debug: false,\n        alwaysImmutable: false,\n        minCacheTime: 5000,\n        maxCacheTime: 60000\n      });\n    });\n    it('should throw an error if required descriptorId prop is not passed', function () {\n      var asyncOperationDescriptor = {\n        requiredParams: ['personId'],\n        operationType: 'WRITE',\n        // optional values\n        debug: false,\n        alwaysImmutable: false,\n        minCacheTime: 5000,\n        maxCacheTime: 60000\n      };\n\n      _asyncOperationStateUtils.default.updateAsyncOperationDescriptor(registeredAsyncOperationDescriptors, asyncOperationDescriptor);\n\n      (0, _chai.expect)(stub.callCount).to.equal(1);\n    });\n  });\n  describe('updateAsyncOperation', function () {\n    var state;\n    beforeEach(function () {\n      state = {};\n    });\n    it('should update state with an asyncOperation', function () {\n      var newAsyncOperation = {\n        descriptorId: 'UPDATE_PERSON_DATA',\n        fetchStatus: 'SUCCESSFUL',\n        message: null,\n        lastFetchStatusTime: '2018-10-01T19:12:46.189Z',\n        lastDataStatusTime: '2018-10-01T19:12:53.189Z',\n        personId: 111\n      };\n      var asyncOperationDescriptor = {\n        descriptorId: 'UPDATE_PERSON_DATA',\n        requiredParams: ['personId'],\n        operationType: 'WRITE'\n      };\n\n      var newState = _asyncOperationStateUtils.default.updateAsyncOperation(state, 'UPDATE_PERSON_DATA_111', newAsyncOperation, asyncOperationDescriptor);\n\n      (0, _chai.expect)(newState).to.have.all.keys('UPDATE_PERSON_DATA_111');\n      (0, _chai.expect)(newState).to.matchSnapshot('state with well formed asyncOperation');\n    });\n  });\n  describe('bulkUpdateAsyncOperations', function () {\n    var state;\n    beforeEach(function () {\n      state = {};\n    });\n    it('should update state with multiple async operations', function () {\n      var asyncOperationUpdates = [{\n        asyncOperation: {\n          descriptorId: 'UPDATE_PERSON_DATA',\n          fetchStatus: 'SUCCESSFUL',\n          dataStatus: 'PRESENT',\n          message: null,\n          lastFetchStatusTime: '2018-10-01T19:12:46.189Z',\n          lastDataStatusTime: '2018-10-01T19:12:53.189Z',\n          personId: 111\n        },\n        asyncOperationKey: 'UPDATE_PERSON_DATA_111',\n        asyncOperationDescriptor: {\n          descriptorId: 'UPDATE_PERSON_DATA',\n          requiredParams: ['personId'],\n          operationType: 'WRITE'\n        }\n      }, {\n        asyncOperation: {\n          descriptorId: 'UPDATE_TEAM_DATA',\n          fetchStatus: 'SUCCESSFUL',\n          dataStatus: 'PRESENT',\n          message: null,\n          lastFetchStatusTime: '2018-10-01T19:12:26.189Z',\n          lastDataStatusTime: '2018-10-01T19:12:27.189Z',\n          teamId: 2\n        },\n        asyncOperationKey: 'UPDATE_TEAM_DATA_2',\n        asyncOperationDescriptor: {\n          descriptorId: 'UPDATE_TEAM_DATA',\n          requiredParams: ['teamId'],\n          operationType: 'WRITE'\n        }\n      }];\n\n      var newState = _asyncOperationStateUtils.default.bulkUpdateAsyncOperations(state, asyncOperationUpdates);\n\n      (0, _chai.expect)(newState).to.have.all.keys('UPDATE_PERSON_DATA_111', 'UPDATE_TEAM_DATA_2');\n      (0, _chai.expect)(newState).to.matchSnapshot('state with multiple asyncOperations');\n    });\n  });\n  describe('getAsyncOperation', function () {\n    var state;\n    beforeEach(function () {\n      state = {};\n    });\n    it('should return an initial read asyncOperation', function () {\n      var asyncOperationDescriptor = _defineProperty({\n        descriptorId: 'FETCH_PERSON_DATA',\n        requiredParams: ['personId'],\n        operationType: 'READ'\n      }, \"descriptorId\", 'FETCH_PERSON_DATA');\n\n      var asyncOperation = _asyncOperationStateUtils.default.getAsyncOperation(state, {}, 'FETCH_PERSON_DATA_111', asyncOperationDescriptor, {\n        personId: 111\n      });\n\n      (0, _chai.expect)(asyncOperation).to.deep.include({\n        fetchStatus: 'NULL',\n        dataStatus: 'ABSENT',\n        lastFetchStatusTime: 0,\n        lastDataStatusTime: 0\n      });\n      (0, _chai.expect)(asyncOperation).to.matchSnapshot('well formed initial asyncOperation');\n    });\n    it('should return an initial write asyncOperation', function () {\n      var asyncOperationDescriptor = _defineProperty({\n        descriptorId: 'UPDATE_PERSON_DATA',\n        requiredParams: ['personId'],\n        operationType: 'WRITE'\n      }, \"descriptorId\", 'UPDATE_PERSON_DATA');\n\n      var asyncOperation = _asyncOperationStateUtils.default.getAsyncOperation(state, {}, 'UPDATE_PERSON_DATA_111', asyncOperationDescriptor, {\n        personId: 111\n      });\n\n      (0, _chai.expect)(asyncOperation).to.deep.include({\n        fetchStatus: 'NULL',\n        lastFetchStatusTime: 0\n      });\n      (0, _chai.expect)(asyncOperation).to.matchSnapshot('well formed initial asyncOperation');\n    });\n    it('should return a pending asyncOperation', function () {\n      state = {\n        FETCH_PERSON_DATA_111: {\n          descriptorId: 'FETCH_PERSON_DATA',\n          fetchStatus: 'PENDING',\n          dataStatus: 'ABSENT',\n          message: null,\n          lastFetchStatusTime: '2018-10-01T19:12:46.189Z',\n          lastDataStatusTime: '2018-10-01T19:12:13.189Z',\n          personId: 111\n        }\n      };\n\n      var asyncOperationDescriptor = _defineProperty({\n        descriptorId: 'FETCH_PERSON_DATA',\n        requiredParams: ['personId'],\n        operationType: 'READ'\n      }, \"descriptorId\", 'FETCH_PERSON_DATA');\n\n      var asyncOperation = _asyncOperationStateUtils.default.getAsyncOperation(state, {}, 'FETCH_PERSON_DATA_111', asyncOperationDescriptor, {\n        personId: 111\n      });\n\n      (0, _chai.expect)(asyncOperation).to.be.an('object');\n      (0, _chai.expect)(asyncOperation).to.matchSnapshot('well formed pending asyncOperation');\n    });\n    it('should return a successful asyncOperation', function () {\n      state = {\n        FETCH_PERSON_DATA_111: {\n          descriptorId: 'FETCH_PERSON_DATA',\n          fetchStatus: 'SUCCESSFUL',\n          dataStatus: 'PRESENT',\n          message: null,\n          lastFetchStatusTime: '2018-10-01T19:12:46.189Z',\n          lastDataStatusTime: '2018-10-01T19:12:53.189Z',\n          personId: 111\n        }\n      };\n\n      var asyncOperationDescriptor = _defineProperty({\n        descriptorId: 'FETCH_PERSON_DATA',\n        requiredParams: ['personId'],\n        operationType: 'READ'\n      }, \"descriptorId\", 'FETCH_PERSON_DATA');\n\n      var asyncOperation = _asyncOperationStateUtils.default.getAsyncOperation(state, {}, 'FETCH_PERSON_DATA_111', asyncOperationDescriptor, {\n        personId: 111\n      });\n\n      (0, _chai.expect)(asyncOperation).to.be.an('object');\n      (0, _chai.expect)(asyncOperation).to.matchSnapshot('well formed successful asyncOperation');\n    });\n    it('should return a successful asyncOperation with parentAsyncOperation metaData', function () {\n      var _fetchPersonDataAsync;\n\n      state = {\n        FETCH_PERSON_DATA_111: {\n          descriptorId: 'FETCH_PERSON_DATA',\n          fetchStatus: 'SUCCESSFUL',\n          dataStatus: 'PRESENT',\n          message: null,\n          lastFetchStatusTime: '2018-10-01T19:12:46.189Z',\n          lastDataStatusTime: '2018-10-01T19:12:53.189Z',\n          personId: 111\n        },\n        FETCH_ALL_PERSON_DATA: {\n          descriptorId: 'FETCH_ALL_PERSON_DATA',\n          fetchStatus: 'SUCCESSFUL',\n          dataStatus: 'PRESENT',\n          message: null,\n          lastFetchStatusTime: '2018-10-01T19:13:52.189Z',\n          lastDataStatusTime: '2018-10-01T19:13:56.189Z'\n        }\n      };\n      var registeredAsyncOperationDescriptors = {\n        FETCH_ALL_PERSON_DATA: _defineProperty({\n          descriptorId: 'FETCH_ALL_PERSON_DATA',\n          operationType: 'READ'\n        }, \"descriptorId\", 'FETCH_ALL_PERSON_DATA')\n      };\n      var fetchPersonDataAsyncOperationDescriptor = (_fetchPersonDataAsync = {\n        descriptorId: 'FETCH_PERSON_DATA',\n        requiredParams: ['personId'],\n        operationType: 'READ'\n      }, _defineProperty(_fetchPersonDataAsync, \"descriptorId\", 'FETCH_PERSON_DATA'), _defineProperty(_fetchPersonDataAsync, \"parentOperationDescriptorId\", 'FETCH_ALL_PERSON_DATA'), _fetchPersonDataAsync);\n\n      var asyncOperation = _asyncOperationStateUtils.default.getAsyncOperation(state, registeredAsyncOperationDescriptors, 'FETCH_PERSON_DATA_111', fetchPersonDataAsyncOperationDescriptor, {\n        personId: 111\n      });\n\n      (0, _chai.expect)(asyncOperation).to.be.an('object');\n      (0, _chai.expect)(asyncOperation).to.deep.include({\n        lastFetchStatusTime: '2018-10-01T19:13:52.189Z',\n        lastDataStatusTime: '2018-10-01T19:13:56.189Z'\n      });\n      (0, _chai.expect)(asyncOperation).to.matchSnapshot('well formed successful asyncOperation with parentAsyncOperation metaData');\n    });\n    it('should return a successful asyncOperation with parentAsyncOperation metaData two levels deep', function () {\n      var _FETCH_ALL_PERSON_DAT2, _fetchPersonDataAsync2;\n\n      state = {\n        FETCH_PERSON_DATA_111: {\n          descriptorId: 'FETCH_PERSON_DATA',\n          fetchStatus: 'SUCCESSFUL',\n          dataStatus: 'PRESENT',\n          message: null,\n          lastFetchStatusTime: '2018-09-01T19:12:46.189Z',\n          lastDataStatusTime: '2018-09-01T19:12:53.189Z',\n          personId: 111\n        },\n        FETCH_ALL_PERSON_DATA_FOR_ORG_22: {\n          descriptorId: 'FETCH_ALL_PERSON_DATA_FOR_ORG',\n          fetchStatus: 'SUCCESSFUL',\n          dataStatus: 'PRESENT',\n          message: null,\n          lastFetchStatusTime: '2018-09-21T19:13:52.189Z',\n          lastDataStatusTime: '2018-09-21T19:13:56.189Z',\n          orgId: 22\n        },\n        FETCH_ALL_DATA_FOR_ORG_22: {\n          descriptorId: 'FETCH_ALL_DATA_FOR_ORG',\n          fetchStatus: 'SUCCESSFUL',\n          dataStatus: 'PRESENT',\n          message: null,\n          lastFetchStatusTime: '2018-10-01T19:16:52.189Z',\n          lastDataStatusTime: '2018-10-01T19:23:56.189Z',\n          orgId: 22\n        }\n      };\n      var registeredAsyncOperationDescriptors = {\n        FETCH_ALL_PERSON_DATA_FOR_ORG: (_FETCH_ALL_PERSON_DAT2 = {\n          descriptorId: 'FETCH_ALL_PERSON_DATA_FOR_ORG',\n          requiredParams: ['orgId'],\n          operationType: 'READ'\n        }, _defineProperty(_FETCH_ALL_PERSON_DAT2, \"descriptorId\", 'FETCH_ALL_PERSON_DATA_FOR_ORG'), _defineProperty(_FETCH_ALL_PERSON_DAT2, \"parentOperationDescriptorId\", 'FETCH_ALL_DATA_FOR_ORG'), _FETCH_ALL_PERSON_DAT2),\n        FETCH_ALL_DATA_FOR_ORG: _defineProperty({\n          descriptorId: 'FETCH_ALL_DATA_FOR_ORG',\n          requiredParams: ['orgId'],\n          operationType: 'READ'\n        }, \"descriptorId\", 'FETCH_ALL_DATA_FOR_ORG')\n      };\n      var fetchPersonDataAsyncOperationDescriptor = (_fetchPersonDataAsync2 = {\n        descriptorId: 'FETCH_PERSON_DATA',\n        requiredParams: ['orgId', 'personId']\n      }, _defineProperty(_fetchPersonDataAsync2, \"descriptorId\", 'FETCH_PERSON_DATA'), _defineProperty(_fetchPersonDataAsync2, \"operationType\", 'READ'), _defineProperty(_fetchPersonDataAsync2, \"parentOperationDescriptorId\", 'FETCH_ALL_PERSON_DATA_FOR_ORG'), _fetchPersonDataAsync2);\n\n      var asyncOperation = _asyncOperationStateUtils.default.getAsyncOperation(state, registeredAsyncOperationDescriptors, 'fetchPersonData_111', fetchPersonDataAsyncOperationDescriptor, {\n        personId: 111,\n        orgId: 22\n      });\n\n      (0, _chai.expect)(asyncOperation).to.be.an('object');\n      (0, _chai.expect)(asyncOperation).to.deep.include({\n        lastFetchStatusTime: '2018-10-01T19:16:52.189Z',\n        lastDataStatusTime: '2018-10-01T19:23:56.189Z'\n      });\n      (0, _chai.expect)(asyncOperation).to.matchSnapshot('well formed successful asyncOperation with parentAsyncOperation metaData two levels deep');\n    });\n  });\n});"]}