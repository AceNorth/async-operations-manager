{"version":3,"sources":["asyncOperationReducer_tests.js"],"names":["_chai","require","_asyncOperationReducer","_interopRequireDefault","_asyncOperationManagerUtils","obj","__esModule","default","describe","state","beforeEach","clearRegisteredAsyncDescriptors","dateNowStub","jest","fn","global","Date","now","it","expect","undefined","to","deep","equal","action","descriptorId","operationStep","type","actionType","personId","registerAsyncOperationDescriptors","requiredParams","operationType","have","all","keys","matchSnapshot"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _chai = require(\"chai\");\n\nvar _asyncOperationReducer = _interopRequireDefault(require(\"../asyncOperationReducer\"));\n\nvar _asyncOperationManagerUtils = require(\"../../asyncOperationManagerUtils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-env jest */\ndescribe('asyncOperationReducer', function () {\n  var state;\n  beforeEach(function () {\n    state = {};\n    (0, _asyncOperationManagerUtils.clearRegisteredAsyncDescriptors)();\n    var dateNowStub = jest.fn(function () {\n      return 1530518207007;\n    });\n    global.Date.now = dateNowStub;\n  });\n  it('should return the initial state', function () {\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(undefined, {})).to.deep.equal(state);\n  });\n  it('should handle BEGIN_ASYNC_OPERATION for write action', function () {\n    var action = {\n      descriptorId: 'UPDATE_PERSON_DATA',\n      operationStep: 'BEGIN_ASYNC_OPERATION',\n      type: 'AOM//BEGIN__UPDATE_PERSON_DATA',\n      actionType: 'UPDATE_PERSON_DATA',\n      personId: 111\n    };\n    (0, _asyncOperationManagerUtils.registerAsyncOperationDescriptors)({\n      descriptorId: 'UPDATE_PERSON_DATA',\n      requiredParams: ['personId'],\n      operationType: 'WRITE'\n    });\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.have.all.keys('UPDATE_PERSON_DATA_111');\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.matchSnapshot('well formed state for begun write async operation');\n  });\n  it('should handle RESOLVE_ASYNC_OPERATION for write action', function () {\n    var action = {\n      descriptorId: 'UPDATE_PERSON_DATA',\n      operationStep: 'RESOLVE_ASYNC_OPERATION',\n      type: 'AOM//RESOLVE__UPDATE_PERSON_DATA',\n      actionType: 'UPDATE_PERSON_DATA',\n      personId: 111\n    };\n    (0, _asyncOperationManagerUtils.registerAsyncOperationDescriptors)({\n      descriptorId: 'UPDATE_PERSON_DATA',\n      requiredParams: ['personId'],\n      operationType: 'WRITE'\n    });\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.have.all.keys('UPDATE_PERSON_DATA_111');\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.matchSnapshot('well formed state for resolved write async operation');\n  });\n  it('should handle REJECT_ASYNC_OPERATION for write action', function () {\n    var action = {\n      descriptorId: 'UPDATE_PERSON_DATA',\n      operationStep: 'REJECT_ASYNC_OPERATION',\n      type: 'AOM//REJECT__UPDATE_PERSON_DATA',\n      actionType: 'UPDATE_PERSON_DATA',\n      personId: 111\n    };\n    (0, _asyncOperationManagerUtils.registerAsyncOperationDescriptors)({\n      descriptorId: 'UPDATE_PERSON_DATA',\n      requiredParams: ['personId'],\n      operationType: 'WRITE'\n    });\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.have.all.keys('UPDATE_PERSON_DATA_111');\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.matchSnapshot('well formed state for rejected read async operation');\n  });\n  it('should handle BEGIN_ASYNC_OPERATION for read action', function () {\n    var action = {\n      descriptorId: 'FETCH_PERSON_DATA',\n      operationStep: 'BEGIN_ASYNC_OPERATION',\n      type: 'AOM//BEGIN__FETCH_PERSON_DATA',\n      actionType: 'FETCH_PERSON_DATA',\n      personId: 111\n    };\n    (0, _asyncOperationManagerUtils.registerAsyncOperationDescriptors)({\n      descriptorId: 'FETCH_PERSON_DATA',\n      requiredParams: ['personId'],\n      operationType: 'READ'\n    });\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.have.all.keys('FETCH_PERSON_DATA_111');\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.matchSnapshot('well formed state for begun read async operation');\n  });\n  it('should handle RESOLVE_ASYNC_OPERATION for read action', function () {\n    var action = {\n      descriptorId: 'FETCH_PERSON_DATA',\n      operationStep: 'RESOLVE_ASYNC_OPERATION',\n      type: 'AOM//RESOLVE__FETCH_PERSON_DATA',\n      actionType: 'FETCH_PERSON_DATA',\n      personId: 111\n    };\n    (0, _asyncOperationManagerUtils.registerAsyncOperationDescriptors)({\n      descriptorId: 'FETCH_PERSON_DATA',\n      requiredParams: ['personId'],\n      operationType: 'READ'\n    });\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.have.all.keys('FETCH_PERSON_DATA_111');\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.matchSnapshot('well formed state for resolved read async operation');\n  });\n  it('should handle REJECT_ASYNC_OPERATION for write action', function () {\n    var action = {\n      descriptorId: 'FETCH_PERSON_DATA',\n      operationStep: 'REJECT_ASYNC_OPERATION',\n      type: 'AOM//REJECT__FETCH_PERSON_DATA',\n      actionType: 'FETCH_PERSON_DATA',\n      personId: 111\n    };\n    (0, _asyncOperationManagerUtils.registerAsyncOperationDescriptors)({\n      descriptorId: 'FETCH_PERSON_DATA',\n      requiredParams: ['personId'],\n      operationType: 'WRITE'\n    });\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.have.all.keys('FETCH_PERSON_DATA_111');\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.matchSnapshot('well formed state for rejected write async operation');\n  });\n});"]}