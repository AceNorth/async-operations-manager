{"version":3,"sources":["helpers_test.js"],"names":["_chai","require","_sinon","_interopRequireDefault","_config","_helpers","obj","__esModule","default","describe","beforeEach","setConfig","logger","exceptionsCallback","spy","it","asyncOperationKey","generateAsyncOperationKey","expect","to","equal","personId","teamId","_asyncOperationManage","getConfig","undefined","called","callCount","_asyncOperationManage2","params","name","asyncOperationDescriptor","requiredParams","asyncOperationParams","getAndValidateParams","deep","_asyncOperationManage3","_asyncOperationManage4","fruits","makeConstantsObject","APPLE","BANANA","Object","isExtensible","be","false"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _chai = require(\"chai\");\n\nvar _sinon = _interopRequireDefault(require(\"sinon\"));\n\nvar _config = _interopRequireDefault(require(\"../config\"));\n\nvar _helpers = require(\"../helpers\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-env jest */\ndescribe('helpers', function () {\n  beforeEach(function () {\n    _config.default.setConfig({\n      logger: {\n        exceptionsCallback: _sinon.default.spy()\n      }\n    });\n  });\n  describe('generateAsyncOperationKey', function () {\n    it('should create an asyncOperation key with no params', function () {\n      var asyncOperationKey = (0, _helpers.generateAsyncOperationKey)('updatePersonData');\n      (0, _chai.expect)(asyncOperationKey).to.equal('updatePersonData');\n    });\n    it('should create an asyncOperation key with one param', function () {\n      var asyncOperationKey = (0, _helpers.generateAsyncOperationKey)('updatePersonData', {\n        personId: 111\n      });\n      (0, _chai.expect)(asyncOperationKey).to.equal('updatePersonData_111');\n    });\n    it('should create an asyncOperation key with multiple params', function () {\n      var asyncOperationKey = (0, _helpers.generateAsyncOperationKey)('updatePersonData', {\n        teamId: 222,\n        personId: 111\n      });\n      (0, _chai.expect)(asyncOperationKey).to.equal('updatePersonData_222_111');\n    });\n    it('should throw an exception if a label is not provided', function () {\n      var _asyncOperationManage = _config.default.getConfig(),\n          logger = _asyncOperationManage.logger;\n\n      (0, _helpers.generateAsyncOperationKey)();\n      (0, _helpers.generateAsyncOperationKey)('');\n      (0, _helpers.generateAsyncOperationKey)(undefined);\n      (0, _chai.expect)(logger.exceptionsCallback.called).to.equal(true);\n      (0, _chai.expect)(logger.exceptionsCallback.callCount).to.equal(3);\n    });\n    it('should throw an exception if a label is not a string', function () {\n      var _asyncOperationManage2 = _config.default.getConfig(),\n          logger = _asyncOperationManage2.logger;\n\n      (0, _helpers.generateAsyncOperationKey)({});\n      (0, _helpers.generateAsyncOperationKey)([]);\n      (0, _helpers.generateAsyncOperationKey)(2);\n      (0, _chai.expect)(logger.exceptionsCallback.called).to.equal(true);\n      (0, _chai.expect)(logger.exceptionsCallback.callCount).to.equal(3);\n    });\n  });\n  describe('getAndValidateParams', function () {\n    beforeEach(function () {\n      _config.default.setConfig({\n        logger: {\n          exceptionsCallback: _sinon.default.spy()\n        }\n      });\n    });\n    it('should validate and successfully return correct asyncOperation params', function () {\n      var params = {\n        personId: 2,\n        teamId: 10,\n        name: 'Darien'\n      };\n      var asyncOperationDescriptor = {\n        requiredParams: ['personId', 'teamId']\n      };\n      var asyncOperationParams = (0, _helpers.getAndValidateParams)(params, asyncOperationDescriptor);\n      (0, _chai.expect)(asyncOperationParams).to.deep.equal({\n        personId: 2,\n        teamId: 10\n      });\n    });\n    it('should validate and fail on an undefined param', function () {\n      var _asyncOperationManage3 = _config.default.getConfig(),\n          logger = _asyncOperationManage3.logger;\n\n      var params = {\n        personId: undefined,\n        teamId: 10,\n        name: 'Darien'\n      };\n      var asyncOperationDescriptor = {\n        requiredParams: ['personId', 'teamId']\n      };\n      (0, _helpers.getAndValidateParams)(params, asyncOperationDescriptor);\n      (0, _chai.expect)(logger.exceptionsCallback.called).to.equal(true);\n    });\n    it('should validate and fail on a missing param', function () {\n      var _asyncOperationManage4 = _config.default.getConfig(),\n          logger = _asyncOperationManage4.logger;\n\n      var params = {\n        personId: 2,\n        name: 'Darien'\n      };\n      var asyncOperationDescriptor = {\n        requiredParams: ['personId', 'teamId']\n      };\n      (0, _helpers.getAndValidateParams)(params, asyncOperationDescriptor);\n      (0, _chai.expect)(logger.exceptionsCallback.called).to.equal(true);\n    });\n  });\n  describe('makeConstantsObject', function () {\n    beforeEach(function () {\n      _config.default.setConfig({\n        logger: {\n          exceptionsCallback: _sinon.default.spy()\n        }\n      });\n    });\n    it('should make a constants object out of an array of string values', function () {\n      var fruits = (0, _helpers.makeConstantsObject)(['APPLE', 'BANANA']);\n      (0, _chai.expect)(fruits).to.deep.equal({\n        APPLE: 'APPLE',\n        BANANA: 'BANANA'\n      });\n    });\n    it('should make a constants object that is immutable', function () {\n      var fruits = (0, _helpers.makeConstantsObject)(['APPLE', 'BANANA']);\n      (0, _chai.expect)(Object.isExtensible(fruits)).to.be.false;\n    });\n  });\n});"]}