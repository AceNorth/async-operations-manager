{"version":3,"sources":["asyncOperationReducer_tests.js"],"names":["require","_chai","_asyncOperationReducer","_interopRequireDefault","_asyncOperationManagerUtils","obj","__esModule","default","describe","state","beforeEach","clearRegisteredAsyncDescriptors","dateNowStub","jest","fn","global","Date","now","it","expect","undefined","to","deep","equal","action","descriptorId","operationStep","type","actionType","personId","registerAsyncOperationDescriptors","requiredParams","operationType","have","all","keys","matchSnapshot"],"mappings":"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","file":"asyncOperationReducer_tests.js","sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nvar _chai = require(\"chai\");\n\nvar _asyncOperationReducer = _interopRequireDefault(require(\"../asyncOperationReducer\"));\n\nvar _asyncOperationManagerUtils = require(\"../../asyncOperationManagerUtils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-env jest */\ndescribe('asyncOperationReducer', () => {\n  let state;\n  beforeEach(() => {\n    state = {};\n    (0, _asyncOperationManagerUtils.clearRegisteredAsyncDescriptors)();\n    const dateNowStub = jest.fn(() => 1530518207007);\n    global.Date.now = dateNowStub;\n  });\n  it('should return the initial state', () => {\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(undefined, {})).to.deep.equal(state);\n  });\n  it('should handle BEGIN_ASYNC_OPERATION for write action', () => {\n    const action = {\n      descriptorId: 'UPDATE_PERSON_DATA',\n      operationStep: 'BEGIN_ASYNC_OPERATION',\n      type: 'AOM//BEGIN__UPDATE_PERSON_DATA',\n      actionType: 'UPDATE_PERSON_DATA',\n      personId: 111\n    };\n    (0, _asyncOperationManagerUtils.registerAsyncOperationDescriptors)({\n      descriptorId: 'UPDATE_PERSON_DATA',\n      requiredParams: ['personId'],\n      operationType: 'WRITE'\n    });\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.have.all.keys('UPDATE_PERSON_DATA_111');\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.matchSnapshot('well formed state for begun write async operation');\n  });\n  it('should handle RESOLVE_ASYNC_OPERATION for write action', () => {\n    const action = {\n      descriptorId: 'UPDATE_PERSON_DATA',\n      operationStep: 'RESOLVE_ASYNC_OPERATION',\n      type: 'AOM//RESOLVE__UPDATE_PERSON_DATA',\n      actionType: 'UPDATE_PERSON_DATA',\n      personId: 111\n    };\n    (0, _asyncOperationManagerUtils.registerAsyncOperationDescriptors)({\n      descriptorId: 'UPDATE_PERSON_DATA',\n      requiredParams: ['personId'],\n      operationType: 'WRITE'\n    });\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.have.all.keys('UPDATE_PERSON_DATA_111');\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.matchSnapshot('well formed state for resolved write async operation');\n  });\n  it('should handle REJECT_ASYNC_OPERATION for write action', () => {\n    const action = {\n      descriptorId: 'UPDATE_PERSON_DATA',\n      operationStep: 'REJECT_ASYNC_OPERATION',\n      type: 'AOM//REJECT__UPDATE_PERSON_DATA',\n      actionType: 'UPDATE_PERSON_DATA',\n      personId: 111\n    };\n    (0, _asyncOperationManagerUtils.registerAsyncOperationDescriptors)({\n      descriptorId: 'UPDATE_PERSON_DATA',\n      requiredParams: ['personId'],\n      operationType: 'WRITE'\n    });\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.have.all.keys('UPDATE_PERSON_DATA_111');\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.matchSnapshot('well formed state for rejected read async operation');\n  });\n  it('should handle BEGIN_ASYNC_OPERATION for read action', () => {\n    const action = {\n      descriptorId: 'FETCH_PERSON_DATA',\n      operationStep: 'BEGIN_ASYNC_OPERATION',\n      type: 'AOM//BEGIN__FETCH_PERSON_DATA',\n      actionType: 'FETCH_PERSON_DATA',\n      personId: 111\n    };\n    (0, _asyncOperationManagerUtils.registerAsyncOperationDescriptors)({\n      descriptorId: 'FETCH_PERSON_DATA',\n      requiredParams: ['personId'],\n      operationType: 'READ'\n    });\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.have.all.keys('FETCH_PERSON_DATA_111');\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.matchSnapshot('well formed state for begun read async operation');\n  });\n  it('should handle RESOLVE_ASYNC_OPERATION for read action', () => {\n    const action = {\n      descriptorId: 'FETCH_PERSON_DATA',\n      operationStep: 'RESOLVE_ASYNC_OPERATION',\n      type: 'AOM//RESOLVE__FETCH_PERSON_DATA',\n      actionType: 'FETCH_PERSON_DATA',\n      personId: 111\n    };\n    (0, _asyncOperationManagerUtils.registerAsyncOperationDescriptors)({\n      descriptorId: 'FETCH_PERSON_DATA',\n      requiredParams: ['personId'],\n      operationType: 'READ'\n    });\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.have.all.keys('FETCH_PERSON_DATA_111');\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.matchSnapshot('well formed state for resolved read async operation');\n  });\n  it('should handle REJECT_ASYNC_OPERATION for write action', () => {\n    const action = {\n      descriptorId: 'FETCH_PERSON_DATA',\n      operationStep: 'REJECT_ASYNC_OPERATION',\n      type: 'AOM//REJECT__FETCH_PERSON_DATA',\n      actionType: 'FETCH_PERSON_DATA',\n      personId: 111\n    };\n    (0, _asyncOperationManagerUtils.registerAsyncOperationDescriptors)({\n      descriptorId: 'FETCH_PERSON_DATA',\n      requiredParams: ['personId'],\n      operationType: 'WRITE'\n    });\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.have.all.keys('FETCH_PERSON_DATA_111');\n    (0, _chai.expect)((0, _asyncOperationReducer.default)(state, action)).to.matchSnapshot('well formed state for rejected write async operation');\n  });\n});"]}